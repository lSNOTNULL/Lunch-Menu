<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- 1ë‹¨ê³„ : (ìë™ ì €ì¥ ì—†ì´) DOM í‘œí˜„í•˜ëŠ” ê°œë… -->
    <form id="controller">
      <textarea name="textData"></textarea>
      <button>ë“±ë¡</button>
    </form>
    <div id="container"></div>
    <script>
      const container = document.querySelector("#container");
      const form = document.querySelector("#controller");
      // https://ko.javascript.info/proxy
      const data = new Proxy([], {
        // proxy ê°ì²´, í‚¤, ê°’ -> ê°ì²´ì— í‚¤ë¥¼ í†µí•´ì„œ ê°’ì„ ë³€í™˜í•˜ëŠ” ê²ƒì´ ì¼ì–´ë‚˜ë©´ ì¼ë‹¨ ê·¸ê±¸ ì²˜ë¦¬í•˜ê³ 
        // ë°°ì—´ì´ ë“¤ì–´ì˜¤ê²Œ ë˜ë©´, ê·¸ ë°°ì—´ ì „ì²´ê°€ target ë˜ëŠ” ê²ƒ.
        set(target, property, value) {
          target[property] = value; // ...
          updateContainer(); // data ë°°ì—´ì— ë°ì´í„° ì¶”ê°€/ìˆ˜ì • ì‹œ ë°˜ì‘
          return true; // ì„±ê³µ/ì‹¤íŒ¨ true/false.
        },
      });
      function updateContainer() {
        container.innerHTML = ""; // ë°°ì—´ì— ìˆëŠ” ê²ƒì„ ì¼ê´„ ì¶”ê°€í•˜ê¸° ì „ì— ë°€ì–´ë²„ë¦¬ê¸°
        for (const d of data) {
          const tmp = document.createElement("div"); // temp...
          //   tmp.textContent = displayData.text;
          tmp.textContent = d.text;
          container.appendChild(tmp);
        }
      }
      function handleForm(event) {
        event.preventDefault();
        const formData = new FormData(form);
        const displayData = { text: formData.get("textData") };
        console.log(displayData);
        data.push(displayData);
        // ğŸš¨
        // const tmp = document.createElement("div"); // temp...
        // tmp.textContent = displayData.text;
        // container.appendChild(tmp);
      }
      //   form.addEventListener("click", handleForm); // ğŸš¨
      form.addEventListener("submit", handleForm); // formì„ ì“¸ê±°ë©´...
    </script>
  </body>
</html>
